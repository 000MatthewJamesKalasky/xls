
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://google.github.io/xls/dslx_std/">
      
      
        <link rel="prev" href="../dslx_reference/">
      
      
        <link rel="next" href="../floating_point/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>Standard Library - XLS: Accelerated HW Synthesis</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.eebd395e.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dslx-built-in-functions-and-standard-library" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="XLS: Accelerated HW Synthesis" class="md-header__button md-logo" aria-label="XLS: Accelerated HW Synthesis" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            XLS: Accelerated HW Synthesis
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Standard Library
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/google/xls/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="XLS: Accelerated HW Synthesis" class="md-nav__button md-logo" aria-label="XLS: Accelerated HW Synthesis" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    XLS: Accelerated HW Synthesis
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/google/xls/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          DSLX
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          DSLX
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/hello_xls/" class="md-nav__link">
        Hello, XLS!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/float_to_int/" class="md-nav__link">
        Basic logic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/intro_to_parametrics/" class="md-nav__link">
        Intro to parameterics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/crc32/" class="md-nav__link">
        For expressions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/prefix_scan/" class="md-nav__link">
        Enumerate and match
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/intro_to_procs/" class="md-nav__link">
        Intro to Procs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          XLS[cc]
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          XLS[cc]
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/xlscc_overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/xlscc_integers/" class="md-nav__link">
        Integers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/xlscc_channels/" class="md-nav__link">
        Channels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/xlscc_memory/" class="md-nav__link">
        Memory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/xlscc_state/" class="md-nav__link">
        State
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/xlscc_pipelined_loops/" class="md-nav__link">
        Pipelined Loops
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          IR
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          IR
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ir_overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ir_semantics/" class="md-nav__link">
        Semantics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../optimizations/optimizations/" class="md-nav__link">
        Optimizations
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          Scheduling
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Scheduling
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scheduling/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../delay_estimation/" class="md-nav__link">
        Delay Estimation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ir_visualization/" class="md-nav__link">
        Visualizer
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
          Native JIT
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Native JIT
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ir_jit/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data_layout/" class="md-nav__link">
        Data Layout
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../solvers/" class="md-nav__link">
        Formal
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          DSLX
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          DSLX
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dslx_reference/" class="md-nav__link">
        Reference
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Standard Library
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Standard Library
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#built-ins" class="md-nav__link">
    Built-ins
  </a>
  
    <nav class="md-nav" aria-label="Built-ins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_with_carry" class="md-nav__link">
    add_with_carry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#widening_cast-and-checked_cast" class="md-nav__link">
    widening_cast and checked_cast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smulp-and-umulp" class="md-nav__link">
    smulp and umulp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map" class="md-nav__link">
    map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#array_rev" class="md-nav__link">
    array_rev
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#const_assert" class="md-nav__link">
    const_assert!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clz-ctz" class="md-nav__link">
    clz, ctz
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#one_hot" class="md-nav__link">
    one_hot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#one_hot_sel" class="md-nav__link">
    one_hot_sel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signex" class="md-nav__link">
    signex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slice" class="md-nav__link">
    slice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rev" class="md-nav__link">
    rev
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit_slice_update" class="md-nav__link">
    bit_slice_update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-wise-reductions-and_reduce-or_reduce-xor_reduce" class="md-nav__link">
    bit-wise reductions: and_reduce, or_reduce, xor_reduce
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update" class="md-nav__link">
    update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assert_eq-assert_lt" class="md-nav__link">
    assert_eq, assert_lt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zerot" class="md-nav__link">
    zero!&lt;T&gt;
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace_fmt" class="md-nav__link">
    trace_fmt!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fail-assertion-failure" class="md-nav__link">
    fail!: assertion failure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cover" class="md-nav__link">
    cover!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gate" class="md-nav__link">
    gate!
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-std" class="md-nav__link">
    import std
  </a>
  
    <nav class="md-nav" aria-label="import std">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bits-type-properties" class="md-nav__link">
    Bits Type Properties
  </a>
  
    <nav class="md-nav" aria-label="Bits Type Properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#std_min_value" class="md-nav__link">
    std::?_min_value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#std_max_value" class="md-nav__link">
    std::?_max_value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdsizeof_" class="md-nav__link">
    std::sizeof_?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-manipulation-functions" class="md-nav__link">
    Bit Manipulation Functions
  </a>
  
    <nav class="md-nav" aria-label="Bit Manipulation Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stdto_signed-stdto_unsigned" class="md-nav__link">
    std::to_signed &amp; std::to_unsigned
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdlsb" class="md-nav__link">
    std::lsb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdconvert_to_bits_msb0" class="md-nav__link">
    std::convert_to_bits_msb0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdconvert_to_bools_lsb0" class="md-nav__link">
    std::convert_to_bools_lsb0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmask_bits" class="md-nav__link">
    std::mask_bits
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdconcat3" class="md-nav__link">
    std::concat3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdrrot" class="md-nav__link">
    std::rrot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdpopcount" class="md-nav__link">
    std::popcount
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdextract_bits" class="md-nav__link">
    std::extract_bits
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mathematical-functions" class="md-nav__link">
    Mathematical Functions
  </a>
  
    <nav class="md-nav" aria-label="Mathematical Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stdbounded_minus_1" class="md-nav__link">
    std::bounded_minus_1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdabs" class="md-nav__link">
    std::abs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdis_pow2" class="md-nav__link">
    std::is_pow2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmul" class="md-nav__link">
    std::?mul
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stditerative_div" class="md-nav__link">
    std::iterative_div
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stddiv_pow2" class="md-nav__link">
    std::div_pow2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmod_pow2" class="md-nav__link">
    std::mod_pow2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdceil_div" class="md-nav__link">
    std::ceil_div
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdround_up_to_nearest" class="md-nav__link">
    std::round_up_to_nearest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdpow" class="md-nav__link">
    std::?pow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdclog2" class="md-nav__link">
    std::clog2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdflog2" class="md-nav__link">
    std:flog2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmax" class="md-nav__link">
    std::?max
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmin" class="md-nav__link">
    std::?min
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stduadd_with_overflow" class="md-nav__link">
    std::uadd_with_overflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdumul_with_overflow" class="md-nav__link">
    std::umul_with_overflow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#misc-functions" class="md-nav__link">
    Misc Functions
  </a>
  
    <nav class="md-nav" aria-label="Misc Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signed-comparison-stdsge-sgt-sle-slt" class="md-nav__link">
    Signed comparison - std::{sge, sgt, sle, slt}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdfind_index" class="md-nav__link">
    std::find_index
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-acm_random" class="md-nav__link">
    import acm_random
  </a>
  
    <nav class="md-nav" aria-label="import acm_random">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#acm_randomrng_deterministic_seed" class="md-nav__link">
    acm_random::rng_deterministic_seed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acm_randomrng_new" class="md-nav__link">
    acm_random::rng_new
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acm_randomrng_next" class="md-nav__link">
    acm_random::rng_next
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acm_randomrng_next64" class="md-nav__link">
    acm_random::rng_next64
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../floating_point/" class="md-nav__link">
        Floating Point
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fuzzer/" class="md-nav__link">
        Fuzzer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dslx_bytecode_interpreter/" class="md-nav__link">
        Interpreter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dslx_language_server/" class="md-nav__link">
        Language Server
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Code Generation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Code Generation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../codegen_options/" class="md-nav__link">
        Codegen Options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ir_lowering/" class="md-nav__link">
        IR Lowering
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vast/" class="md-nav__link">
        VAST
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../build_system/" class="md-nav__link">
        Build System
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bazel_rules_macros/" class="md-nav__link">
        Bazel Rules And Macros
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tools_quick_start/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        Listing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interpreters/" class="md-nav__link">
        Interpreters
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../xls_style/" class="md-nav__link">
        Style Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../adding_ir_operation/" class="md-nav__link">
        Adding a new IR operation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ideas_and_projects/" class="md-nav__link">
        Ideas and Projects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fpga_characterization/" class="md-nav__link">
        FPGA characterization (experimental)
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6" >
      
      
      
        <label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
          Design Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_6">
          <span class="md-nav__icon md-icon"></span>
          Design Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../design_docs/legalize_multiple_channel_ops_per_channel/" class="md-nav__link">
        Legalize Multiple Channel Ops Per Channel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../design_docs/proc_scoped_channels/" class="md-nav__link">
        Proc-scoped channels
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          NoC
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          NoC
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../noc/xls_noc_readme/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" >
      
      
      
        <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
          Topologies
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2">
          <span class="md-nav__icon md-icon"></span>
          Topologies
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../noc/xls_noc_topologies/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../noc/xls_noc_dimension_order_topology/" class="md-nav__link">
        Dimension Order
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../noc/xls_noc_tree_topology/" class="md-nav__link">
        Tree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../noc/xls_noc_butterfly_topology/" class="md-nav__link">
        k-ary n-fly Butterfly
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../noc/xls_noc_fully_connected_topology/" class="md-nav__link">
        Fully Connected
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../noc/xls_noc_star_topology/" class="md-nav__link">
        Star
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../noc/xls_noc_glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#built-ins" class="md-nav__link">
    Built-ins
  </a>
  
    <nav class="md-nav" aria-label="Built-ins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_with_carry" class="md-nav__link">
    add_with_carry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#widening_cast-and-checked_cast" class="md-nav__link">
    widening_cast and checked_cast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smulp-and-umulp" class="md-nav__link">
    smulp and umulp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map" class="md-nav__link">
    map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#array_rev" class="md-nav__link">
    array_rev
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#const_assert" class="md-nav__link">
    const_assert!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clz-ctz" class="md-nav__link">
    clz, ctz
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#one_hot" class="md-nav__link">
    one_hot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#one_hot_sel" class="md-nav__link">
    one_hot_sel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signex" class="md-nav__link">
    signex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slice" class="md-nav__link">
    slice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rev" class="md-nav__link">
    rev
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit_slice_update" class="md-nav__link">
    bit_slice_update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-wise-reductions-and_reduce-or_reduce-xor_reduce" class="md-nav__link">
    bit-wise reductions: and_reduce, or_reduce, xor_reduce
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update" class="md-nav__link">
    update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assert_eq-assert_lt" class="md-nav__link">
    assert_eq, assert_lt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zerot" class="md-nav__link">
    zero!&lt;T&gt;
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace_fmt" class="md-nav__link">
    trace_fmt!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fail-assertion-failure" class="md-nav__link">
    fail!: assertion failure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cover" class="md-nav__link">
    cover!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gate" class="md-nav__link">
    gate!
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-std" class="md-nav__link">
    import std
  </a>
  
    <nav class="md-nav" aria-label="import std">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bits-type-properties" class="md-nav__link">
    Bits Type Properties
  </a>
  
    <nav class="md-nav" aria-label="Bits Type Properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#std_min_value" class="md-nav__link">
    std::?_min_value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#std_max_value" class="md-nav__link">
    std::?_max_value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdsizeof_" class="md-nav__link">
    std::sizeof_?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-manipulation-functions" class="md-nav__link">
    Bit Manipulation Functions
  </a>
  
    <nav class="md-nav" aria-label="Bit Manipulation Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stdto_signed-stdto_unsigned" class="md-nav__link">
    std::to_signed &amp; std::to_unsigned
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdlsb" class="md-nav__link">
    std::lsb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdconvert_to_bits_msb0" class="md-nav__link">
    std::convert_to_bits_msb0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdconvert_to_bools_lsb0" class="md-nav__link">
    std::convert_to_bools_lsb0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmask_bits" class="md-nav__link">
    std::mask_bits
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdconcat3" class="md-nav__link">
    std::concat3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdrrot" class="md-nav__link">
    std::rrot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdpopcount" class="md-nav__link">
    std::popcount
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdextract_bits" class="md-nav__link">
    std::extract_bits
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mathematical-functions" class="md-nav__link">
    Mathematical Functions
  </a>
  
    <nav class="md-nav" aria-label="Mathematical Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stdbounded_minus_1" class="md-nav__link">
    std::bounded_minus_1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdabs" class="md-nav__link">
    std::abs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdis_pow2" class="md-nav__link">
    std::is_pow2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmul" class="md-nav__link">
    std::?mul
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stditerative_div" class="md-nav__link">
    std::iterative_div
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stddiv_pow2" class="md-nav__link">
    std::div_pow2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmod_pow2" class="md-nav__link">
    std::mod_pow2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdceil_div" class="md-nav__link">
    std::ceil_div
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdround_up_to_nearest" class="md-nav__link">
    std::round_up_to_nearest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdpow" class="md-nav__link">
    std::?pow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdclog2" class="md-nav__link">
    std::clog2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdflog2" class="md-nav__link">
    std:flog2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmax" class="md-nav__link">
    std::?max
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdmin" class="md-nav__link">
    std::?min
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stduadd_with_overflow" class="md-nav__link">
    std::uadd_with_overflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdumul_with_overflow" class="md-nav__link">
    std::umul_with_overflow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#misc-functions" class="md-nav__link">
    Misc Functions
  </a>
  
    <nav class="md-nav" aria-label="Misc Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signed-comparison-stdsge-sgt-sle-slt" class="md-nav__link">
    Signed comparison - std::{sge, sgt, sle, slt}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdfind_index" class="md-nav__link">
    std::find_index
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-acm_random" class="md-nav__link">
    import acm_random
  </a>
  
    <nav class="md-nav" aria-label="import acm_random">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#acm_randomrng_deterministic_seed" class="md-nav__link">
    acm_random::rng_deterministic_seed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acm_randomrng_new" class="md-nav__link">
    acm_random::rng_new
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acm_randomrng_next" class="md-nav__link">
    acm_random::rng_next
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acm_randomrng_next64" class="md-nav__link">
    acm_random::rng_next64
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="dslx-built-in-functions-and-standard-library">DSLX Built-In Functions and Standard Library</h1>
<p>This page documents the DSLX <strong>built-in functions</strong> (i.e. functions that don't
require an import and are available in the top level namespace) and <strong>standard
library modules</strong> (i.e. which are imported with an unqualified name like <code>import
std</code>).</p>
<p>Generally built-in functions have some capabilities that cannot be easily done
in a user-defined function, and thus do not live in the standard library.</p>
<div class="toc">
<ul>
<li><a href="#dslx-built-in-functions-and-standard-library">DSLX Built-In Functions and Standard Library</a><ul>
<li><a href="#built-ins">Built-ins</a><ul>
<li><a href="#add_with_carry">add_with_carry</a></li>
<li><a href="#widening_cast-and-checked_cast">widening_cast and checked_cast</a></li>
<li><a href="#smulp-and-umulp">smulp and umulp</a></li>
<li><a href="#map">map</a></li>
<li><a href="#array_rev">array_rev</a></li>
<li><a href="#const_assert">const_assert!</a></li>
<li><a href="#clz-ctz">clz, ctz</a></li>
<li><a href="#one_hot">one_hot</a></li>
<li><a href="#one_hot_sel">one_hot_sel</a></li>
<li><a href="#signex">signex</a></li>
<li><a href="#slice">slice</a></li>
<li><a href="#rev">rev</a></li>
<li><a href="#bit_slice_update">bit_slice_update</a></li>
<li><a href="#bit-wise-reductions-and_reduce-or_reduce-xor_reduce">bit-wise reductions: and_reduce, or_reduce, xor_reduce</a></li>
<li><a href="#update">update</a></li>
<li><a href="#assert_eq-assert_lt">assert_eq, assert_lt</a></li>
<li><a href="#zerot">zero!&lt;T&gt;</a></li>
<li><a href="#trace_fmt">trace_fmt!</a></li>
<li><a href="#fail-assertion-failure">fail!: assertion failure</a></li>
<li><a href="#cover">cover!</a></li>
<li><a href="#gate">gate!</a></li>
</ul>
</li>
<li><a href="#import-std">import std</a><ul>
<li><a href="#bits-type-properties">Bits Type Properties</a><ul>
<li><a href="#std_min_value">std::?_min_value</a></li>
<li><a href="#std_max_value">std::?_max_value</a></li>
<li><a href="#stdsizeof_">std::sizeof_?</a></li>
</ul>
</li>
<li><a href="#bit-manipulation-functions">Bit Manipulation Functions</a><ul>
<li><a href="#stdto_signed-stdto_unsigned">std::to_signed &amp; std::to_unsigned</a></li>
<li><a href="#stdlsb">std::lsb</a></li>
<li><a href="#stdconvert_to_bits_msb0">std::convert_to_bits_msb0</a></li>
<li><a href="#stdconvert_to_bools_lsb0">std::convert_to_bools_lsb0</a></li>
<li><a href="#stdmask_bits">std::mask_bits</a></li>
<li><a href="#stdconcat3">std::concat3</a></li>
<li><a href="#stdrrot">std::rrot</a></li>
<li><a href="#stdpopcount">std::popcount</a></li>
<li><a href="#stdextract_bits">std::extract_bits</a></li>
</ul>
</li>
<li><a href="#mathematical-functions">Mathematical Functions</a><ul>
<li><a href="#stdbounded_minus_1">std::bounded_minus_1</a></li>
<li><a href="#stdabs">std::abs</a></li>
<li><a href="#stdis_pow2">std::is_pow2</a></li>
<li><a href="#stdmul">std::?mul</a></li>
<li><a href="#stditerative_div">std::iterative_div</a></li>
<li><a href="#stddiv_pow2">std::div_pow2</a></li>
<li><a href="#stdmod_pow2">std::mod_pow2</a></li>
<li><a href="#stdceil_div">std::ceil_div</a></li>
<li><a href="#stdround_up_to_nearest">std::round_up_to_nearest</a></li>
<li><a href="#stdpow">std::?pow</a></li>
<li><a href="#stdclog2">std::clog2</a></li>
<li><a href="#stdflog2">std:flog2</a></li>
<li><a href="#stdmax">std::?max</a></li>
<li><a href="#stdmin">std::?min</a></li>
<li><a href="#stduadd_with_overflow">std::uadd_with_overflow</a></li>
<li><a href="#stdumul_with_overflow">std::umul_with_overflow</a></li>
</ul>
</li>
<li><a href="#misc-functions">Misc Functions</a><ul>
<li><a href="#signed-comparison-stdsge-sgt-sle-slt">Signed comparison - std::{sge, sgt, sle, slt}</a></li>
<li><a href="#stdfind_index">std::find_index</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#import-acm_random">import acm_random</a><ul>
<li><a href="#acm_randomrng_deterministic_seed">acm_random::rng_deterministic_seed</a></li>
<li><a href="#acm_randomrng_new">acm_random::rng_new</a></li>
<li><a href="#acm_randomrng_next">acm_random::rng_next</a></li>
<li><a href="#acm_randomrng_next64">acm_random::rng_next64</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2 id="built-ins">Built-ins</h2>
<p>This section describes the built-in functions provided for use in the DSL that
do not need to be explicitly imported.</p>
<p>NOTE: A brief note on "Parallel Primitives": the DSL is expected to grow
additional support for use of high-level parallel primitives over time, adding
operators for order-insensitive reductions, scans, groupings, and similar. By
making these operations known to the compiler in their high level form, we
potentially enable optimizations and analyses on their higher level ("lifted")
form. As of now, <code>map</code> is the sole parallel-primitive-oriented built-in.</p>
<h3 id="add_with_carry"><code>add_with_carry</code></h3>
<p>Operation that produces the result of the add, as well as the carry bit as an
output. The binary add operators works similar to software programming
languages, preserving the length of the input operands, so this built-in can
assist when easy access to the carry out value is desired. Has the following
signature:</p>
<div class="highlight"><pre><span></span><code>fn add_with_carry&lt;N&gt;(x: uN[N], y: uN[N]) -&gt; (u1, uN[N])
</code></pre></div>
<h3 id="widening_cast-and-checked_cast"><code>widening_cast</code> and <code>checked_cast</code></h3>
<p><code>widening_cast</code> and <code>checked_cast</code> cast bits-type values to bits-type values
with additional checks compared to casting with <code>as</code>.</p>
<p><code>widening_cast</code> will report a static error if the type casted to is unable to
respresent all values of the type casted from (ex. <code>widening_cast&lt;u5&gt;(s3:0)</code>
will fail because s3:-1 cannot be respresented as an unsigned number).</p>
<p><code>checked_cast</code> will cause a runtime error during dslx interpretation if the
value being casted is unable to fit within the type casted to (ex.
<code>checked_cast&lt;u5&gt;(s3:0)</code> will succeed while <code>checked_cast&lt;u5&gt;(s3:-1)</code> will cause
the dslx interpreter to fail.</p>
<p>Currently both <code>widening_cast</code> and <code>checked_cast</code> will lower into a normal IR
cast and will not generate additional assertions at the IR or Verilog level.</p>
<div class="highlight"><pre><span></span><code>fn widening_cast&lt;sN[N]&gt;(value: uN[M]) -&gt; sN[N]; where N &gt; M
fn widening_cast&lt;sN[N]&gt;(value: sN[M]) -&gt; sN[N]; where N &gt;= M
fn widening_cast&lt;uN[N]&gt;(value: uN[M]) -&gt; uN[N]; where N &gt;= M

fn checked_cast&lt;xN[M]&gt;(value: uN[N]) -&gt; xN[M]
fn checked_cast&lt;xN[M]&gt;(value: sN[N]) -&gt; xN[M]
</code></pre></div>
<h3 id="smulp-and-umulp"><code>smulp</code> and <code>umulp</code></h3>
<p><code>smulp</code> and <code>umulp</code> perform signed and unsigned partial multiplications. These
operations return a two-element tuple with the property that the sum of the two
elements is equal to the product of the original inputs. Performing a partial
multiplication allows for a pipeline stage in the middle of a multiply. These
operations have the following signatures:</p>
<div class="highlight"><pre><span></span><code>fn smulp&lt;N&gt;(lhs: sN[N], rhs: sN[N]) -&gt; (sN[N], sN[N])
fn umulp&lt;N&gt;(lhs: uN[N], rhs: uN[N]) -&gt; (uN[N], uN[N])
</code></pre></div>
<h3 id="map"><code>map</code></h3>
<p><code>map</code>, similarly to other languages, executes a transformation function on all
the elements of an original array to produce the resulting "mapped' array.
<a href="https://github.com/google/xls/tree/main/xls/dslx/tests/map_of_stdlib_parametric.x">For example</a>:
taking the absolute value of each element in an input array:</p>
<div class="highlight"><pre><span></span><code><span class="n">import</span><span class="w"> </span><span class="n">std</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">(</span><span class="n">x</span>: <span class="nc">s3</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">s3</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">y</span>: <span class="nc">s3</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">std</span>::<span class="n">abs</span><span class="p">);</span>
<span class="w">  </span><span class="n">y</span>
<span class="p">}</span>

<span class="cp">#[test]</span>
<span class="k">fn</span> <span class="nf">main_test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">got</span>: <span class="nc">s3</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="n">s3</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>:<span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]);</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">s3</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>:<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">got</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>Note that map is special, in that we can pass it a callee <em>as if</em> it were a
value. As a function that "takes" a function as an argument, <code>map</code> is a special
built-in -- in language implementor parlance it is a <em>higher order function</em>.</p>
<p>Implementation note: Functions are not first class values in the DSL, so the
name of the function must be referred to directly.</p>
<p>Note: Novel higher order functions (e.g. if a user wanted to write their own
<code>map</code>) cannot currently be written in user-level DSL code.</p>
<h3 id="array_rev"><code>array_rev</code></h3>
<p><code>array_rev</code> reverses the elements of an array.</p>
<div class="highlight"><pre><span></span><code><span class="cp">#[test]</span>
<span class="k">fn</span> <span class="nf">test_array_rev</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">array_rev</span><span class="p">(</span><span class="kt">u8</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>:<span class="p">[</span><span class="mi">42</span><span class="p">]),</span><span class="w"> </span><span class="kt">u8</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>:<span class="p">[</span><span class="mi">42</span><span class="p">]);</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">array_rev</span><span class="p">(</span><span class="n">u3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>:<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]),</span><span class="w"> </span><span class="n">u3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>:<span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">]);</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">array_rev</span><span class="p">(</span><span class="n">u3</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>:<span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">]),</span><span class="w"> </span><span class="n">u3</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>:<span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]);</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">array_rev</span><span class="p">(</span><span class="n">u4</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>:<span class="p">[</span><span class="mh">0xf</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]),</span><span class="w"> </span><span class="n">u4</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>:<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mh">0xf</span><span class="p">]);</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">array_rev</span><span class="p">(</span><span class="n">u3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>:<span class="p">[]),</span><span class="w"> </span><span class="n">u3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>:<span class="p">[]);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="const_assert"><code>const_assert!</code></h3>
<p>Performs a check on a constant expression that only fails at compile-time (not
at runtime).</p>
<p>Note that this can only be applied to compile-time-constant expressions.</p>
<div class="highlight"><pre><span></span><code><span class="cp">#[test]</span>
<span class="k">fn</span> <span class="nf">test_const_assert</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">42</span><span class="p">;</span>
<span class="w">  </span><span class="n">const_assert</span><span class="o">!</span><span class="p">(</span><span class="n">N</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Keep in mind that all <code>const_assert!</code>s in a function evaluate, similar to
<code>static_assert</code> in C++ -- they are effectively part of the type system, so you
cannot suppress them by putting them in a conditional:</p>
<div class="highlight"><pre><span></span><code><span class="k">fn</span> <span class="nf">f</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">const_assert</span><span class="o">!</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w">  </span><span class="c1">// &lt;-- still fails even inside the &quot;if false&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="clz-ctz"><code>clz</code>, <code>ctz</code></h3>
<p>DSLX provides the common "count leading zeroes" and "count trailing zeroes"
functions:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">x0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">u32</span>:<span class="mh">0x0FFFFFF8</span><span class="p">;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clz</span><span class="p">(</span><span class="n">x0</span><span class="p">);</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctz</span><span class="p">(</span><span class="n">x0</span><span class="p">);</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="kt">u32</span>:<span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">x1</span><span class="p">);</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="kt">u32</span>:<span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">x2</span><span class="p">)</span>
</code></pre></div>
<h3 id="one_hot"><code>one_hot</code></h3>
<p>Converts a value to one-hot form. Has the following signature:</p>
<div class="highlight"><pre><span></span><code>fn one_hot&lt;N, NP1=N+1&gt;(x: uN[N], lsb_is_prio: bool) -&gt; uN[NP1]
</code></pre></div>
<p>When <code>lsb_is_prio</code> is true, the least significant bit that is set becomes the
one-hot bit in the result. When it is false, the most significant bit that is
set becomes the one-hot bit in the result.</p>
<p>When all bits in the input are unset, the additional bit present in the output
value (MSb) becomes set.</p>
<p>Example usage:
<a href="https://github.com/google/xls/tree/main/xls/dslx/tests/one_hot.x"><code>dslx/tests/one_hot.x</code></a>.</p>
<p>See also the
<a href="../ir_semantics/#one_hot">IR semantics for the <code>one_hot</code> op</a>.</p>
<h3 id="one_hot_sel"><code>one_hot_sel</code></h3>
<p>Produces the result of 'or'-ing all case values for which the corresponding bit
of the selector is enabled. In cases where the selector has exactly one bit set
(it is in one-hot form) this is equivalent to a match.</p>
<div class="highlight"><pre><span></span><code>fn one_hot_sel&lt;N, M&gt;(selector: uN[N], cases: uN[N][M]) -&gt; uN[N]
</code></pre></div>
<p>Evaluates each case value and <code>or</code>s each case together if the corresponding bit
in the selector is set. The first element of <code>cases</code> is included if the LSB is
set, the second if the next least significant bit and so on. If no selector bits
are set this evaluates to zero. This function is not generally used directly
though the compiler will when possible synthesize the equivalent code from a
<code>match</code> expression. This is included for testing purposes and for bespoke
'intrinsic-style programming' use cases.</p>
<h3 id="signex"><code>signex</code></h3>
<p>Casting has well-defined extension rules, but in some cases it is necessary to
be explicit about sign-extensions, if just for code readability. For this, there
is the <code>signex</code> built-in.</p>
<p>To invoke the <code>signex</code> built-in, provide it with the operand to sign extend
(lhs), as well as the target type to extend to: these operands may be either
signed or unsigned. Note that the <em>value</em> of the right hand side is ignored,
only its type is used to determine the result type of the sign extension.</p>
<div class="highlight"><pre><span></span><code><span class="cp">#[test]</span>
<span class="k">fn</span> <span class="nf">test_signex</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">u8</span>:<span class="mh">0xff</span><span class="p">;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">s</span>: <span class="nc">s32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">signex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">s32</span>:<span class="mi">0</span><span class="p">);</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">u</span>: <span class="kt">u32</span> <span class="o">=</span><span class="w"> </span><span class="n">signex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">0</span><span class="p">);</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">u</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>Note that both <code>s</code> and <code>u</code> contain the same bits in the above example.</p>
<h3 id="slice">slice</h3>
<p>Array-slice built-in operation. Note that the "want" argument is <em>not</em> used as a
value, but is just used to reflect the desired slice type. (Prior to constexprs
being passed to built-in functions, this was the canonical way to reflect a
constexpr in the type system.) Has the following signature:</p>
<div class="highlight"><pre><span></span><code>fn slice&lt;T: type, N, M, S&gt;(xs: T[N], start: uN[M], want: T[S]) -&gt; T[S]
</code></pre></div>
<h3 id="rev"><code>rev</code></h3>
<p><code>rev</code> is used to reverse the bits in an unsigned bits value. The LSb in the
input becomes the MSb in the result, the 2nd LSb becomes the 2nd MSb in the
result, and so on.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// (Dummy) wrapper around reverse.</span>
<span class="k">fn</span> <span class="nf">wrapper</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">rev</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Target for IR conversion that works on u3s.</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">(</span><span class="n">x</span>: <span class="nc">u3</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">u3</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">wrapper</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Reverse examples.</span>
<span class="cp">#[test]</span>
<span class="k">fn</span> <span class="nf">test_reverse</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">u3</span>:<span class="mb">0b100</span><span class="p">,</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="n">u3</span>:<span class="mb">0b001</span><span class="p">));</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">u3</span>:<span class="mb">0b001</span><span class="p">,</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="n">u3</span>:<span class="mb">0b100</span><span class="p">));</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>:<span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">rev</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>:<span class="mi">0</span><span class="p">));</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">u1</span>:<span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">rev</span><span class="p">(</span><span class="n">u1</span>:<span class="mi">1</span><span class="p">));</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">u2</span>:<span class="mb">0b10</span><span class="p">,</span><span class="w"> </span><span class="n">rev</span><span class="p">(</span><span class="n">u2</span>:<span class="mb">0b01</span><span class="p">));</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">u2</span>:<span class="mb">0b00</span><span class="p">,</span><span class="w"> </span><span class="n">rev</span><span class="p">(</span><span class="n">u2</span>:<span class="mb">0b00</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="bit_slice_update"><code>bit_slice_update</code></h3>
<p><code>bit_slice_update(subject, start, value)</code> returns a copy of the bits-typed value
<code>subject</code> where the contiguous bits starting at index <code>start</code> (where 0 is the
least-significant bit) are replaced with <code>value</code>. The bit-width of the returned
value is the same as the bit-width of <code>subject</code>. Any updated bit indices which
are out of bounds (if <code>start + bit-width(value) &gt;= bit-width(subject)</code>) are
ignored. Example usage:
<a href="https://github.com/google/xls/tree/main/xls/dslx/tests/bit_slice_update.x"><code>dslx/tests/bit_slice_update.x</code></a>.</p>
<h3 id="bit-wise-reductions-and_reduce-or_reduce-xor_reduce">bit-wise reductions: <code>and_reduce</code>, <code>or_reduce</code>, <code>xor_reduce</code></h3>
<p>These are unary reduction operations applied to a bits-typed value:</p>
<ul>
<li><code>and_reduce</code>: evaluates to bool:1 if all bits of the input are set, and 0
    otherwise.</li>
<li><code>or_reduce</code>: evaluates to bool:1 if any bit of the input is set, and 0
    otherwise.</li>
<li><code>xor_reduce</code>: evaluates to bool:1 if there is an odd number of bits set in
    the input, and 0 otherwise.</li>
</ul>
<p>These functions return the identity element of the respective operation for
trivial (0 bit wide) inputs:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#[test]</span>
<span class="k">fn</span> <span class="nf">test_trivial_reduce</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">and_reduce</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>:<span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">or_reduce</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>:<span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">xor_reduce</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>:<span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="update"><code>update</code></h3>
<p><code>update(array, index, new_value)</code> returns a copy of <code>array</code> where <code>array[index]</code>
has been replaced with <code>new_value</code>, and all other elements are unchanged. Note
that this is <em>not</em> an in-place update of the array, it is an "evolution" of
<code>array</code>. It is the compiler's responsibility to optimize by using mutation
instead of copying, when it's safe to do. The compiler makes a best effort to do
this, but can't guarantee the optimization is always made.</p>
<h3 id="assert_eq-assert_lt"><code>assert_eq</code>, <code>assert_lt</code></h3>
<p>In a unit test pseudo function all valid DSLX code is allowed. To evaluate test
results DSLX provides the <code>assert_eq</code> primitive (we'll add more of those in the
future). Here is an example of a <code>divceil</code> implementation with its corresponding
tests:</p>
<div class="highlight"><pre><span></span><code><span class="k">fn</span> <span class="nf">divceil</span><span class="p">(</span><span class="n">x</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">y</span>: <span class="kt">u32</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">u32</span> <span class="p">{</span>
<span class="w">  </span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="kt">u32</span>:<span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">1</span>
<span class="p">}</span>

<span class="cp">#[test]</span>
<span class="k">fn</span> <span class="nf">test_divceil</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="kt">u32</span>:<span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">divceil</span><span class="p">(</span><span class="kt">u32</span>:<span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">2</span><span class="p">));</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="kt">u32</span>:<span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">divceil</span><span class="p">(</span><span class="kt">u32</span>:<span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">2</span><span class="p">));</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="kt">u32</span>:<span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">divceil</span><span class="p">(</span><span class="kt">u32</span>:<span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">2</span><span class="p">));</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="kt">u32</span>:<span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">divceil</span><span class="p">(</span><span class="kt">u32</span>:<span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">2</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
<p><code>assert_eq</code> cannot currently be synthesized into equivalent Verilog. Because of
that it is recommended to use it within <code>test</code> constructs (interpretation) only.</p>
<h3 id="zerot"><code>zero!&lt;T&gt;</code></h3>
<p>DSLX has a macro for easy creation of zero values, even from aggregate types.
Invoke the macro with the type parameter as follows:</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span> <span class="nc">MyPoint</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">x</span>: <span class="kt">u32</span><span class="p">,</span>
<span class="w">  </span><span class="n">y</span>: <span class="kt">u32</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">enum</span> <span class="nc">MyEnum</span><span class="w"> </span>: <span class="nc">u2</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">ZERO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">u2</span>:<span class="mi">0</span><span class="p">,</span>
<span class="w">  </span><span class="n">ONE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">u2</span>:<span class="mi">1</span><span class="p">,</span>
<span class="p">}</span>

<span class="cp">#[test]</span>
<span class="k">fn</span> <span class="nf">test_zero_macro</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">zero</span><span class="o">!&lt;</span><span class="kt">u32</span><span class="o">&gt;</span><span class="p">(),</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">0</span><span class="p">);</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">zero</span><span class="o">!&lt;</span><span class="n">MyPoint</span><span class="o">&gt;</span><span class="p">(),</span><span class="w"> </span><span class="n">MyPoint</span><span class="p">{</span><span class="n">x</span>: <span class="kt">u32</span>:<span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">y</span>: <span class="kt">u32</span>:<span class="mi">0</span><span class="p">});</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">zero</span><span class="o">!&lt;</span><span class="n">MyEnum</span><span class="o">&gt;</span><span class="p">(),</span><span class="w"> </span><span class="n">MyEnum</span>::<span class="n">ZERO</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>zero!&lt;T&gt;</code> macro can also be used with the struct update syntax to
initialize a subset of fields to zero. In the example below all fields except
<code>foo</code> are initialized to zero in the struct returned by <code>f</code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span> <span class="nc">MyStruct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">foo</span>: <span class="nc">u1</span><span class="p">,</span>
<span class="w">  </span><span class="n">bar</span>: <span class="nc">u2</span><span class="p">,</span>
<span class="w">  </span><span class="n">baz</span>: <span class="nc">u3</span><span class="p">,</span>
<span class="w">  </span><span class="n">bat</span>: <span class="nc">u4</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">f</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">MyStruct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">MyStruct</span><span class="p">{</span><span class="n">foo</span>: <span class="nc">u1</span>:<span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="n">zero</span><span class="o">!&lt;</span><span class="n">MyStruct</span><span class="o">&gt;</span><span class="p">()}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="trace_fmt"><code>trace_fmt!</code></h3>
<p>DSLX supports printf-style debugging via the <code>trace_fmt!</code> builtin, which allows
dumping of current values to stdout. For example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Note: to see `trace_fmt!` output you need to be seeing `INFO` level logging,</span>
<span class="c1">// enabled by adding the &#39;--alsologtostderr&#39; flag to the command line (among</span>
<span class="c1">// other means). For example:</span>
<span class="c1">// bazel run -c opt //xls/dslx:interpreter_main  /path/to/dslx/file.x -- --alsologtostderr</span>

<span class="k">fn</span> <span class="nf">shifty</span><span class="p">(</span><span class="n">x</span>: <span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="n">y</span>: <span class="nc">u3</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">u8</span> <span class="p">{</span>
<span class="w">  </span><span class="n">trace_fmt</span><span class="o">!</span><span class="p">(</span><span class="s">&quot;x: {:x} y: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// Note: y looks different as a negative number when the high bit is set.</span>
<span class="w">  </span><span class="n">trace_fmt</span><span class="o">!</span><span class="p">(</span><span class="s">&quot;y as s8: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">s2</span><span class="p">);</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">y</span>
<span class="p">}</span>

<span class="cp">#[test]</span>
<span class="k">fn</span> <span class="nf">test_shifty</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">shifty</span><span class="p">(</span><span class="kt">u8</span>:<span class="mh">0x42</span><span class="p">,</span><span class="w"> </span><span class="n">u3</span>:<span class="mi">4</span><span class="p">),</span><span class="w"> </span><span class="kt">u8</span>:<span class="mh">0x20</span><span class="p">);</span>
<span class="w">  </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">shifty</span><span class="p">(</span><span class="kt">u8</span>:<span class="mh">0x42</span><span class="p">,</span><span class="w"> </span><span class="n">u3</span>:<span class="mi">7</span><span class="p">),</span><span class="w"> </span><span class="kt">u8</span>:<span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>would produce the following output, with each trace being annotated with its
corresponding source position:</p>
<div class="highlight"><pre><span></span><code>[...]
[ RUN UNITTEST  ] test_shifty
I0510 14:31:17.516227 1247677 bytecode_interpreter.cc:994] x: 42 y: 4
I0510 14:31:17.516227 1247677 bytecode_interpreter.cc:994] y as s8: 4
I0510 14:31:17.516227 1247677 bytecode_interpreter.cc:994] x: 42 y: 7
I0510 14:31:17.516227 1247677 bytecode_interpreter.cc:994] y as s8: -1
[            OK ]
[...]
</code></pre></div>
<p>Note: <code>trace!</code> currently exists as a builtin but is in the process of being
removed, as it provided the user with only a "global flag" way of specifying the
desired format for output values -- <code>trace_fmt!</code> is more powerful.</p>
<h3 id="fail-assertion-failure"><code>fail!</code>: assertion failure</h3>
<p>The <code>fail!</code> builtin indicates dataflow that should not be occurring in practice.
Its general signature is:</p>
<div class="highlight"><pre><span></span><code>fail!(label, fallback_value)
</code></pre></div>
<p>The <code>fail!</code> builtin can be thought of as a "fatal assertion macro". It is used
to <strong>annotate dataflow that should not occur in practice</strong> and, if triggered,
should raise a fatal error in simulation (e.g. via a JIT-execution failure
status or a Verilog assertion when running in RTL simulation).</p>
<p>Note, however, that XLS will permit users to avoid inserting
fatal-error-signaling hardware that correspond to this <code>fail!</code> -- assuming it
will not be triggered in practice minimizes its cost in synthesized form. In
this situation, <strong>when it is "erased", it acts as the identity function</strong>,
propagating the <code>fallback_value</code>. This allows XLS to keep well defined semantics
even when fatal assertion hardware is not present.</p>
<p><strong>Example:</strong> if only these two enum values shown should be possible (say, as a
documented <a href="https://en.wikipedia.org/wiki/Precondition">precondition</a> for
<code>main</code>):</p>
<div class="highlight"><pre><span></span><code><span class="k">enum</span> <span class="nc">EnumType</span>: <span class="nc">u2</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">FIRST</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">  </span><span class="n">SECOND</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">(</span><span class="n">x</span>: <span class="nc">EnumType</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">u32</span> <span class="p">{</span>
<span class="w">  </span><span class="k">match</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">EnumType</span>::<span class="n">FIRST</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="n">EnumType</span>::<span class="n">SECOND</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">fail</span><span class="o">!</span><span class="p">(</span><span class="s">&quot;unknown_EnumType&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">0</span><span class="p">),</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>fail!("unknown_EnumType", u32:0)</code> above indicates that a) that match arm
<em>should</em> not be reached (and if it is in the JIT or RTL simulation it will cause
an error status or assertion failure respectively), but b) provides a fallback
value to use (of the appropriate type) in case it were to happen in synthesized
gates which did not insert fatal-error-indicating hardware.</p>
<p>The associated label (the first argument) must be a valid Verilog identifier and
is used for identifying the failure when lowered to SystemVerilog. At higher
levels in the stack, it's unused.</p>
<h3 id="cover"><code>cover!</code></h3>
<p>NOTE: Currently, <code>cover!</code> has no effect in RTL simulators supported in XLS open
source (i.e. iverilog). See
<a href="https://github.com/google/xls/issues/436">google/xls#436</a>.</p>
<p>The <code>cover!</code> builtin tracks how often some condition is satisfied. It desugars
into SystemVerilog cover points. Its signature is:</p>
<div class="highlight"><pre><span></span><code>cover!(&lt;name&gt;, &lt;condition&gt;);
</code></pre></div>
<p>Where <code>name</code> is a function-unique literal string identifying the coverpoint and
<code>condition</code> is a boolean element. When <code>condition</code> is true, a counter with the
given name is incremented that can be inspected upon program termination.
Coverpoints can be used to give an indication of code "coverage", i.e. to see
what paths of a design are exercised in practice. The name of the coverpoint
must begin with either a letter or underscore, and its remainder must consist of
letters, digits, underscores, or dollar signs.</p>
<h3 id="gate"><code>gate!</code></h3>
<p>The <code>gate!</code> built-in is used for operand gating, of the form:</p>
<div class="highlight"><pre><span></span><code>let gated_value = gate!(&lt;pass_value&gt;, &lt;value&gt;);
</code></pre></div>
<p>This will generally use a special Verilog macro to avoid the underlying
synthesis tool doing boolean optimization, and will turn <code>gated_value</code> to <code>0</code>
when the predicate <code>pass_value</code> is <code>false</code>. This can be used in attempts to
manually avoid toggles based on the gating predicate.</p>
<p>It is expected that XLS will grow facilities to inserting gating ops
automatically, but manual user insertion is a practical step in this direction.
Additionally, it is expected that if, in the resulting Verilog, gating occurs on
a value that originates from a flip flop, the operand gating may be promoted to
register-based load-enable gating.</p>
<h2 id="import-std"><code>import std</code></h2>
<h3 id="bits-type-properties">Bits Type Properties</h3>
<h4 id="std_min_value"><code>std::?_min_value</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">unsigned_min_value</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">signed_min_value</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Returns the minimum signed or unsigned value contained in N bits.</p>
<h4 id="std_max_value"><code>std::?_max_value</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">unsigned_max_value</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">signed_max_value</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
</code></pre></div>
<p>Returns the maximum signed or unsigned value contained in N bits.</p>
<h4 id="stdsizeof_"><code>std::sizeof_?</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">sizeof_unsigned</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="w"> </span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="kt">u32</span>
<span class="nc">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">sizeof_signed</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="w"> </span>: <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="kt">u32</span>
</code></pre></div>
<p>Returns the number of bits (sizeof) of unsigned or signed bit value.</p>
<h3 id="bit-manipulation-functions">Bit Manipulation Functions</h3>
<h4 id="stdto_signed-stdto_unsigned"><code>std::to_signed</code> &amp; <code>std::to_unsigned</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">to_signed</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">to_unsigned</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span><span class="w"> </span><span class="p">{</span>
</code></pre></div>
<p>Convenience helper that converts an unsigned bits argument to its same-sized
signed type, or visa-versa. This is morally equivalent to (but slightly more
convenient than) a pattern like:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">sN</span><span class="p">[</span><span class="n">std</span>::<span class="n">sizeof_unsigned</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
</code></pre></div>
<h4 id="stdlsb"><code>std::lsb</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">lsb</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">u1</span>
</code></pre></div>
<p>Extracts the LSB (Least Significant Bit) from the value <code>x</code> and returns it.</p>
<h4 id="stdconvert_to_bits_msb0"><code>std::convert_to_bits_msb0</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">convert_to_bits_msb0</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="kt">bool</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Converts an array of <code>N</code> bools to a <code>bits[N]</code> value.</p>
<p><strong>Note well:</strong> the boolean value at <strong>index 0</strong> of the array becomes the <strong>most
significant bit</strong> in the resulting bit value. Similarly, the last index of the
array becomes the <strong>least significant bit</strong> in the resulting bit value.</p>
<div class="highlight"><pre><span></span><code><span class="n">import</span><span class="w"> </span><span class="n">std</span>

<span class="cp">#[test]</span>
<span class="k">fn</span> <span class="nf">convert_to_bits_test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">u3</span>:<span class="mb">0b001</span><span class="p">,</span><span class="w"> </span><span class="n">std</span>::<span class="n">convert_to_bits</span><span class="p">(</span><span class="kt">bool</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>:<span class="p">[</span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">]));</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">u3</span>:<span class="mb">0b100</span><span class="p">,</span><span class="w"> </span><span class="n">std</span>::<span class="n">convert_to_bits</span><span class="p">(</span><span class="kt">bool</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>:<span class="p">[</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">]));</span>
<span class="w">  </span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<p>There's always a source of confusion in these orderings:</p>
<ul>
<li>Mathematically we often indicate the least significant digit as "digit 0"</li>
<li><em>But</em>, in a number as we write the digits from left-to-right on a piece of
  paper, if you made an array from the written characters, the digit at "array
  index 0" would be the most significant bit.</li>
</ul>
<p>So, it's somewhat ambiguous whether "index 0" in the array would become the
least significant bit or the most significant bit. This routine uses the "as it
looks on paper" conversion; e.g. <code>[true, false, false]</code> becomes <code>0b100</code>.</p>
<h4 id="stdconvert_to_bools_lsb0"><code>std::convert_to_bools_lsb0</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">fn</span><span class="w"> </span><span class="n">convert_to_bools_lsb0</span><span class="o">&lt;</span><span class="n">N</span>:<span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="kt">bool</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Convert a "word" of bits to a corresponding array of booleans.</p>
<p><strong>Note well:</strong> The least significant bit of the word becomes index 0 in the
array.</p>
<h4 id="stdmask_bits"><code>std::mask_bits</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">mask_bits</span><span class="o">&lt;</span><span class="n">X</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">bits</span><span class="p">[</span><span class="n">X</span><span class="p">]</span>
</code></pre></div>
<p>Returns a value with X bits set (of type bits[X]).</p>
<h4 id="stdconcat3"><code>std::concat3</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">concat3</span><span class="o">&lt;</span><span class="n">X</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">Z</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">R</span>: <span class="kt">u32</span> <span class="o">=</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Z</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">X</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">Y</span><span class="p">],</span><span class="w"> </span><span class="n">z</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">Z</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">bits</span><span class="p">[</span><span class="n">R</span><span class="p">]</span>
</code></pre></div>
<p>Concatenates 3 values of arbitrary bitwidths to a single value.</p>
<h4 id="stdrrot"><code>std::rrot</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">rrot</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Rotate <code>x</code> right by <code>y</code> bits.</p>
<h4 id="stdpopcount"><code>std::popcount</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">popcount</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Counts the number of bits in <code>x</code> that are '1'.</p>
<h4 id="stdextract_bits"><code>std::extract_bits</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">extract_bits</span><span class="o">&lt;</span><span class="n">from_inclusive</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">to_exclusive</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">fixed_shift</span>: <span class="kt">u32</span><span class="p">,</span>
<span class="w">                    </span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="w"> </span>: <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">bits</span><span class="p">[</span><span class="n">std</span>::<span class="n">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">to_exclusive</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">from_inclusive</span><span class="p">)]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x_extended</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">uN</span><span class="p">[</span><span class="n">max</span><span class="p">(</span><span class="n">unsigned_sizeof</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fixed_shift</span><span class="p">,</span><span class="w"> </span><span class="n">to_exclusive</span><span class="p">)];</span>
<span class="w">    </span><span class="p">(</span><span class="n">x_extended</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">fixed_shift</span><span class="p">)[</span><span class="n">from_inclusive</span>:<span class="nc">to_exclusive</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Extracts a bit-slice from x shifted left by fixed_shift.  This function behaves as-if x as
resonably infinite precision so that the shift does not drop any bits and that the bit slice
will be in-range.</p>
<p>If <code>to_exclusive &lt;= from_excsuive</code>, the result will be a zero-bit <code>bits[0]</code>.</p>
<h3 id="mathematical-functions">Mathematical Functions</h3>
<h4 id="stdbounded_minus_1"><code>std::bounded_minus_1</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">bounded_minus_1</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Returns the value of <code>x - 1</code> with saturation at <code>0</code>.</p>
<h4 id="stdabs"><code>std::abs</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">abs</span><span class="o">&lt;</span><span class="n">BITS</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">sN</span><span class="p">[</span><span class="n">BITS</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">sN</span><span class="p">[</span><span class="n">BITS</span><span class="p">]</span>
</code></pre></div>
<p>Returns the absolute value of <code>x</code> as a signed number.</p>
<h4 id="stdis_pow2"><code>std::is_pow2</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">is_pow2</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="kt">bool</span>
</code></pre></div>
<p>Returns true when x is a non-zero power-of-two.</p>
<h4 id="stdmul"><code>std::?mul</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">umul</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">M</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">R</span>: <span class="kt">u32</span> <span class="o">=</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">M</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">M</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">uN</span><span class="p">[</span><span class="n">R</span><span class="p">]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">smul</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">M</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">R</span>: <span class="kt">u32</span> <span class="o">=</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">M</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">sN</span><span class="p">[</span><span class="n">M</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">sN</span><span class="p">[</span><span class="n">R</span><span class="p">]</span>
</code></pre></div>
<p>Returns product of <code>x</code> (<code>N</code> bits) and <code>y</code> (<code>M</code> bits) as an <code>N+M</code> bit value.</p>
<h4 id="stditerative_div"><code>std::iterative_div</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">iterative_div</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">DN</span>: <span class="kt">u32</span> <span class="o">=</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kt">u32</span>:<span class="mi">2</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Calculate <code>x / y</code> one bit at a time. This is an alternative to using the
division operator '/' which may not synthesize nicely.</p>
<h4 id="stddiv_pow2"><code>std::div_pow2</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">div_pow2</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Returns <code>x / y</code> where <code>y</code> must be a non-zero power-of-two.</p>
<h4 id="stdmod_pow2"><code>std::mod_pow2</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">mod_pow2</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Returns <code>x % y</code> where <code>y</code> must be a non-zero power-of-two.</p>
<h4 id="stdceil_div"><code>std::ceil_div</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">ceil_div</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Returns the ceiling of (x divided by y).</p>
<h4 id="stdround_up_to_nearest"><code>std::round_up_to_nearest</code></h4>
<div class="highlight"><pre><span></span><code>pub fn round_up_to_nearest(x: u32, y: u32) -&gt; u32
</code></pre></div>
<p>Returns <code>x</code> rounded up to the nearest multiple of <code>y</code>.</p>
<h4 id="stdpow"><code>std::?pow</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">upow</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">n</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">spow</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">n</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Performs integer exponentiation as in Hacker's Delight, Section 11-3. Only
non-negative exponents are allowed, hence the uN parameter for spow.</p>
<h4 id="stdclog2"><code>std::clog2</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">clog2</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Returns <code>ceiling(log2(x))</code>, with one exception: When <code>x = 0</code>, this function
differs from the true mathematical function: <code>clog2(0) = 0</code> where as
<code>ceil(log2(0)) = -infinity</code></p>
<p>This function is frequently used to calculate the number of bits required to
represent <code>x</code> possibilities. With this interpretation, it is sensible to define
<code>clog2(0) = 0</code>.</p>
<p>Example: <code>clog2(7) = 3</code>.</p>
<h4 id="stdflog2"><code>std:flog2</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">flog2</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">bits</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Returns <code>floor(log2(x))</code>, with one exception:</p>
<p>When x=0, this function differs from the true mathematical function: <code>flog2(0) =
0</code> where as <code>floor(log2(0)) = -infinity</code></p>
<p>This function is frequently used to calculate the number of bits required to
represent an unsigned integer <code>n</code> to define <code>flog2(0) = 0</code>, so that <code>flog(n)+1</code>
represents the number of bits needed to represent the <code>n</code>.</p>
<p>Example: <code>flog2(7) = 2</code>, <code>flog2(8) = 3</code>.</p>
<h4 id="stdmax"><code>std::?max</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">smax</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">umax</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Returns the maximum of two integers.</p>
<h4 id="stdmin"><code>std::?min</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">smin</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">sN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">umin</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
</code></pre></div>
<p>Returns the minimum of two unsigned integers.</p>
<h4 id="stduadd_with_overflow"><code>std::uadd_with_overflow</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">uadd_with_overflow</span><span class="o">&lt;</span><span class="n">V</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">M</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="n">uN</span><span class="p">[</span><span class="n">V</span><span class="p">])</span>
</code></pre></div>
<p>Returns a 2-tuple indicating overflow (boolean) and a sum <code>(x + y) as uN[V]</code>.
An overflow occurs if the result does not fit within a <code>uN[V]</code>.</p>
<h4 id="stdumul_with_overflow"><code>std::umul_with_overflow</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">umul_with_overflow</span><span class="o">&lt;</span><span class="n">V</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">M</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="n">uN</span><span class="p">[</span><span class="n">V</span><span class="p">])</span>
</code></pre></div>
<p>Returns a 2-tuple indicating overflow (boolean) and a product <code>(x * y) as uN[V]</code>.
An overflow occurs if the result does not fit within a <code>uN[V]</code>.</p>
<h3 id="misc-functions">Misc Functions</h3>
<h4 id="signed-comparison-stdsge-sgt-sle-slt"><code>Signed comparison - std::{sge, sgt, sle, slt}</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">sge</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="kt">bool</span>
<span class="nc">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">sgt</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="kt">bool</span>
<span class="nc">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">sle</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="kt">bool</span>
<span class="nc">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">slt</span><span class="o">&lt;</span><span class="n">N</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="w"> </span><span class="n">y</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="kt">bool</span>
</code></pre></div>
<p><strong>Explicit signed comparison</strong> helpers for working with unsigned values, can be
a bit more convenient and a bit more explicit intent than doing casting of left
hand side and right hand side.</p>
<h4 id="stdfind_index"><code>std::find_index</code></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">find_index</span><span class="o">&lt;</span><span class="n">BITS</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">ELEMS</span>: <span class="kt">u32</span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">array</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">BITS</span><span class="p">][</span><span class="n">ELEMS</span><span class="p">],</span><span class="w"> </span><span class="n">x</span>: <span class="nc">uN</span><span class="p">[</span><span class="n">BITS</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="kt">u32</span><span class="p">)</span>
</code></pre></div>
<p>Returns (<code>found</code>, <code>index</code>) given an array and the element to find within the
array.</p>
<p>Note that when <code>found</code> is false, the <code>index</code> is <code>0</code> -- <code>0</code> is provided instead
of a value like <code>-1</code> to prevent out-of-bounds accesses from occurring if the
index is used in a match expression (which will eagerly evaluate all of its
arms), to prevent it from creating an error at simulation time if the value is
ultimately discarded from the unselected match arm.</p>
<h2 id="import-acm_random"><code>import acm_random</code></h2>
<p>Port of
<a href="https://github.com/google/or-tools/blob/66b8d230798f9b8a3c98c26a997daf04974400b8/ortools/base/random.cc#L35">ACM random</a>
number generator to DSLX.</p>
<p>DO NOT use <code>acm_random.x</code> for any application where security -- unpredictability
of subsequent output and previous output -- is needed. ACMRandom is in <em>NO</em>
<em>WAY</em> a cryptographically secure pseudorandom number generator, and using it
where recipients of its output may wish to guess earlier/later output values
would be very bad.</p>
<h3 id="acm_randomrng_deterministic_seed"><code>acm_random::rng_deterministic_seed</code></h3>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">rng_deterministic_seed</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">u32</span>
</code></pre></div>
<p>Returns a fixed seed for use in the random number generator.</p>
<h3 id="acm_randomrng_new"><code>acm_random::rng_new</code></h3>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">rng_new</span><span class="p">(</span><span class="n">seed</span>: <span class="kt">u32</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">State</span>
</code></pre></div>
<p>Create the state for a new random number generator using the given seed.</p>
<h3 id="acm_randomrng_next"><code>acm_random::rng_next</code></h3>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">rng_next</span><span class="p">(</span><span class="n">s</span>: <span class="nc">State</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="p">(</span><span class="n">State</span><span class="p">,</span><span class="w"> </span><span class="kt">u32</span><span class="p">)</span>
</code></pre></div>
<p>Returns a pseudo-random number in the range <code>[1, 2^31-2]</code>.</p>
<p>Note that this is one number short on both ends of the full range of
non-negative 32-bit integers, which range from <code>0</code> to <code>2^31-1</code>.</p>
<h3 id="acm_randomrng_next64"><code>acm_random::rng_next64</code></h3>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">rng_next</span><span class="p">(</span><span class="n">s</span>: <span class="nc">State</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="p">(</span><span class="n">State</span><span class="p">,</span><span class="w"> </span><span class="kt">u64</span><span class="p">)</span>
</code></pre></div>
<p>Returns a pseudo random number in the range <code>[1, (2^31-2)^2]</code>.</p>
<p>Note that this does not cover all non-negative values of int64, which range from
<code>0</code> to <code>2^63-1</code>. <strong>The top two bits are ALWAYS ZERO</strong>.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        
      
        
          <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
      
    
  </body>
</html>