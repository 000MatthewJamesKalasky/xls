name: Build And Deploy MkDocs

on:
# TODO(vmirian) 2022-02-02 Enable below to execute action on push.
#  push:
#    branches:
#    - main
#    paths:
#    - "**.md"
#    - "mkdocs.yml"
  workflow_dispatch:

jobs:
  docs:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - uses: actions/setup-python@v2
    - run: pip install --upgrade pip && pip install mkdocs mkdocs-gen-files mkdocs-material mkdocs-exclude mdx_truly_sane_lists
    - run: git config user.name 'xls-github-bot' && git config user.email 'xls-github-bot@google.com'
    - name: Publish docs
      run: mkdocs gh-deploy
# TODO(vmirian) 2022-02-02 When action is live, enable message.
#      run: mkdocs gh-deploy -m "mkdocs generated documentation from ${GITHUB_SHA}"